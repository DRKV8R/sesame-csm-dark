<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Studio ‚Äì Voice & Video</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <style>
    /* ---------  GLOBAL THEME  --------- */
    :root{
      --glass-bg:rgba(0,0,0,.4);
      --glass-border:rgba(255,255,255,.08);
      --accent-red:#ef4444;
      --accent-blue:#3b82f6;
      --accent-green:#10b981;
      --text-primary:#fff;
      --text-secondary:#e5e7eb;
      --text-muted:#9ca3af;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      font-family:'Inter',sans-serif;
      background:linear-gradient(135deg,#000 0%,#1a1a1a 50%,#000 100%);
      color:var(--text-primary);
      min-height:100vh;overflow-x:hidden;
    }
    .glass{background:var(--glass-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid var(--glass-border);box-shadow:0 6px 24px rgba(0,0,0,.3);}
    a{color:var(--accent-blue);text-decoration:none;}
    /* ---------  NAV  --------- */
    nav{position:fixed;top:0;left:0;right:0;z-index:1000;padding:1rem 2rem;}  
    .nav-content{max-width:1400px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;}
    .nav-logo{display:flex;align-items:center;gap:.75rem;font-size:1.25rem;font-weight:700;}
    .menu{display:flex;align-items:center;gap:1.5rem;font-size:.875rem;font-weight:500;}
    .menu-item{cursor:pointer;padding:.5rem 1rem;border-radius:8px;transition:.25s;}
    .menu-item:hover{background:rgba(255,255,255,.08);}
    /* ---------  TAB LAYOUT  --------- */
    .tabs{max-width:1400px;margin:120px auto 40px;padding:0 2rem;}
    .tab-buttons{display:flex;gap:1rem;margin-bottom:2rem;}
    .tab-btn{padding:.75rem 1.25rem;border:none;border-radius:10px;font-weight:600;cursor:pointer;transition:.25s;background:var(--glass-bg);color:var(--text-primary);}
    .tab-btn.active{background:var(--accent-blue);}
    .tab{display:none;animation:fadeIn .4s ease;}
    .tab.active{display:block;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
    /* ---------  COMPONENTS  --------- */
    .section{margin-bottom:2.5rem;}
    .section h3{font-size:1.25rem;font-weight:600;margin-bottom:1rem;}
    .upload-box{border:2px dashed var(--glass-border);border-radius:12px;padding:2rem;text-align:center;cursor:pointer;transition:.25s;}
    .upload-box:hover{border-color:var(--accent-blue);background:rgba(59,130,246,.08);}
    textarea,input[type=text]{width:100%;background:rgba(0,0,0,.3);border:1px solid var(--glass-border);border-radius:8px;color:var(--text-primary);padding:.75rem 1rem;font-size:.9rem;margin-bottom:1rem;}
    button.primary{background:linear-gradient(135deg,var(--accent-red),#dc2626);color:#fff;border:none;border-radius:8px;padding:.75rem 1.5rem;font-weight:600;cursor:pointer;transition:.25s;}
    button.primary:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(239,68,68,.4);}
    button.secondary{background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:8px;color:var(--text-primary);padding:.75rem 1.25rem;font-weight:600;cursor:pointer;margin-right:.75rem;}
    .progress{height:8px;background:rgba(255,255,255,.08);border-radius:4px;overflow:hidden;margin-bottom:1rem;}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--accent-blue),var(--accent-green));width:0%;transition:width .3s;}
    .image-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.75rem;margin-top:1rem;}
    .image-grid img{width:100%;height:120px;object-fit:cover;border-radius:8px;}
    video,audio{width:100%;border-radius:12px;margin-top:1rem;}
    /* ---------  MEDIA  --------- */
    @media(max-width:768px){.tabs{padding:0 1rem}.menu{gap:1rem}.menu-item{padding:.25rem .75rem}}
  </style>
</head>
<body>
  <!-- NAV -->
  <nav class="glass">
    <div class="nav-content">
      <div class="nav-logo">üéôÔ∏è AI Studio</div>
      <div class="menu">
        <div class="menu-item" onclick="openSettings()">‚öôÔ∏è Settings</div>
        <div class="menu-item" onclick="showUsage()">üìä Usage</div>
        <div class="menu-item" id="genCounter">0/100</div>
      </div>
    </div>
  </nav>

  <!-- TABS -->
  <div class="tabs">
    <!-- Tab buttons -->
    <div class="tab-buttons">
      <button class="tab-btn active" onclick="switchTab('voice')">Voice Cloning</button>
      <button class="tab-btn" onclick="switchTab('video')">Video Generation</button>
      <button class="tab-btn" onclick="switchTab('assistant')">AI Assistant (Mai)</button>
    </div>

    <!-- VOICE TAB -->
    <div id="voice" class="tab active glass">
      <div class="section">
        <h3>1 ¬∑ Upload Audio</h3>
        <div id="audioBox" class="upload-box" onclick="audioInput.click()">Drop or click to select audio</div>
        <input id="audioInput" type="file" accept="audio/*" hidden />
        <audio id="audioPreview" controls style="display:none"></audio>
        <div id="voiceQ" class="progress" style="display:none"><div class="progress-fill"></div></div>
      </div>
      <div class="section">
        <h3>2 ¬∑ Transcription</h3>
        <textarea id="transcription" rows="5" placeholder="Transcription will appear here‚Ä¶"></textarea>
        <button class="secondary" onclick="transcribeAudio()">Generate ‚Ü∫</button>
      </div>
      <div class="section">
        <h3>3 ¬∑ Train & Deploy</h3>
        <input id="voiceName" type="text" placeholder="Voice Profile Name" />
        <button class="primary" onclick="trainVoice()">üîÑ Train Voice</button>
        <div id="trainVoiceProg" class="progress" style="display:none"><div class="progress-fill"></div></div>
        <button class="primary" onclick="generateVoice()" style="margin-top:1rem">üé§ Generate Speech</button>
        <audio id="voiceOut" controls style="display:none"></audio>
      </div>
    </div>

    <!-- VIDEO TAB -->
    <div id="video" class="tab glass">
      <div class="section">
        <h3>1 ¬∑ Upload Character Images</h3>
        <div id="imgBox" class="upload-box" onclick="imgInput.click()">Drop or click to add images</div>
        <input id="imgInput" type="file" accept="image/*" multiple hidden />
        <div class="image-grid" id="imgGrid"></div>
      </div>
      <div class="section">
        <h3>2 ¬∑ Train LoRA Model</h3>
        <input id="characterName" type="text" placeholder="Character Name (e.g., Mai)" />
        <button class="primary" onclick="trainVideoLora()">üîÑ Train Video LoRA</button>
        <div id="trainVideoProg" class="progress" style="display:none"><div class="progress-fill"></div></div>
      </div>
      <div class="section">
        <h3>3 ¬∑ Generate Video</h3>
        <textarea id="videoPrompt" rows="3" placeholder="Describe the scene: Professional woman walking through office‚Ä¶"></textarea>
        <button class="primary" onclick="generateVideo()">üé¨ Generate Video</button>
        <video id="videoOut" controls style="display:none"></video>
      </div>
    </div>

    <!-- ASSISTANT TAB -->
    <div id="assistant" class="tab glass">
      <div class="section">
        <h3>Mai Assistant Demo</h3>
        <button class="primary" onclick="runMaiDemo()">ü§ñ Run Portfolio Demo</button>
        <video id="maiVid" controls style="display:none"></video>
        <audio id="maiAud" controls style="display:none"></audio>
      </div>
    </div>
  </div>

  <!-- SETTINGS MODAL (basic) -->
  <div id="settingsModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(10px);align-items:center;justify-content:center;">
    <div class="glass" style="max-width:420px;width:100%;padding:2rem;border-radius:16px;">
      <h2 style="margin-bottom:1rem">Settings</h2>
      <input id="endpointVoice" type="text" placeholder="Sesame Endpoint ID" />
      <input id="endpointVideo" type="text" placeholder="WAN Endpoint ID" style="margin-top:.75rem" />
      <input id="apiKey" type="text" placeholder="RunPod API Key" style="margin-top:.75rem" />
      <button class="primary" style="margin-top:1rem;width:100%" onclick="saveSettings()">Save</button>
    </div>
  </div>

  <script>
    /* ==========  UTILS  ========== */
    const g = id => document.getElementById(id);
    const settings = JSON.parse(localStorage.getItem('aiStudioSettings')||'{}');

    /* ==========  TAB LOGIC  ========== */
    function switchTab(id){
      document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.querySelector(`.tab-btn[onclick*=\"${id}\"]`).classList.add('active');
      g(id).classList.add('active');
    }

    /* ==========  SETTINGS  ========== */
    function openSettings(){
      g('settingsModal').style.display='flex';
      g('endpointVoice').value=settings.voice||'';
      g('endpointVideo').value=settings.video||'';
      g('apiKey').value=settings.key||'';
    }
    function saveSettings(){
      settings.voice=g('endpointVoice').value.trim();
      settings.video=g('endpointVideo').value.trim();
      settings.key=g('apiKey').value.trim();
      localStorage.setItem('aiStudioSettings',JSON.stringify(settings));
      g('settingsModal').style.display='none';
      alert('Saved!');
    }

    /* ==========  VOICE PIPELINE  ========== */
    const audioInput=g('audioInput');
    audioInput.onchange=e=>{const file=e.target.files[0];if(file){previewAudio(file)}};
    function previewAudio(file){
      const url=URL.createObjectURL(file);
      g('audioPreview').src=url;
      g('audioPreview').style.display='block';
    }
    async function transcribeAudio(){/*placeholder*/}
    async function trainVoice(){/*placeholder*/}
    async function generateVoice(){/*placeholder*/}

    /* ==========  VIDEO PIPELINE  ========== */
    const imgInput=g('imgInput');
    const imgGrid=g('imgGrid');
    imgInput.onchange=e=>{
      [...e.target.files].forEach(f=>{
        const url=URL.createObjectURL(f);
        const img=document.createElement('img');img.src=url;
        imgGrid.appendChild(img);
      });
    };
    async function trainVideoLora(){/*placeholder*/}
    async function generateVideo(){/*placeholder*/}

    /* ==========  MAI DEMO  ========== */
    async function runMaiDemo(){/*placeholder*/}

    /* ==========  USAGE COUNTER  ========== */
    function showUsage(){alert('Usage: '+localStorage.getItem('genCount')||0);}
    function incGen(n=1){
      const c=parseInt(localStorage.getItem('genCount')||0)+n;
      localStorage.setItem('genCount',c);g('genCounter').innerText=c+'/100';
    }
  </script>
</body>
</html>
